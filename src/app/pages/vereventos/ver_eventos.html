<nav class="navbar-superior">
    <div class="logo-container">
        <img src="/Imegenes/pleca_educacion_dic24.png" alt="Logo de Educación">
        <img src="/Imegenes/pleca_tecnm.jpg" alt="Logo de TecNM">
        <img src="/Imegenes/Imagen1.png" alt="Logo de Chiapas">
    </div>
</nav>

<nav class="navbar-inferior">
    <div class="titulo-navbar">
        Eventos 
    </div>
</nav>

<div class="contenedor-vista">
    
    <header class="header-vista">
        <h2>Eventos Registrados</h2>
        <button class="btn-accion-principal btn-refrescar" (click)="cargarEventos()">
            <svg viewBox="0 0 512 512" width="16" height="16">
                <path fill="white"
                d="M105.1 202.6c11.9-25.6 44.5-31.4 69.1-17l17.4 9.8
                1.4 2.5 17.1-9.6c11.9-6.7 25.9-5.1 36.9 4.3l70 60.1
                2.3 2 17.5-9.8c24.6-14.1 57.2-8.3 69.1 17l1.7 3.6
                3.6-1.7c25.6-11.9 31.4-44.5 17-69.1l-9.8-17.4-2.5-1.4
                9.6-17.1c6.7-11.9 5.1-25.9-4.3-36.9L392.3 84.8l-2-2
                -17.5 9.8c-24.6 14.1-57.2 8.3-69.1-17l-1.7-3.6-3.6
                1.7c-25.6 11.9-31.4 44.5-17 69.1l9.8 17.4 2.5 1.4
                -9.6 17.1c-6.7 11.9-5.1 25.9 4.3 36.9L184.8 427.2l2
                2 17.5-9.8c24.6-14.1 57.2-8.3 69.1 17l1.7 3.6 3.6
                -1.7c25.6-11.9 31.4-44.5 17-69.1l-9.8-17.4-2.5-1.4
                9.6-17.1c6.7-11.9-5.1 25.9-4.3-36.9L107.1 84.8l-2
                -2-17.5 9.8c-24.6 14.1-57.2 8.3-69.1 17l-1.7 3.6
                -3.6-1.7c-25.6 11.9-31.4 44.5-17 69.1zM512 256
                c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0
                256 0s256 114.6 256 256z"/>
            </svg>
            Actualizar
        </button>
    </header>

    <div *ngIf="cargando" class="estado-panel cargando">Cargando eventos...</div>
    <div *ngIf="errorCarga" class="estado-panel error">{{ errorCarga }}</div>
    <div *ngIf="!cargando && eventos.length === 0 && !errorCarga"
         class="estado-panel vacio">
        No hay eventos por el momento.
    </div>

    <div *ngIf="eventos.length > 0" class="eventos-lista">
        
        <div *ngFor="let evento of eventos" class="evento-card tarjeta-horizontal">
            
            <div class="card-media media-horizontal">
                <ng-container *ngIf="evento.rutaImagen; else noImagePlaceholder">

                    <!-- ✅ CAMBIO 1: se usa directamente la URL -->
                    <img [src]="evento.rutaImagen"
                         alt="Imagen promocional del evento"
                         class="imagen-promocional">

                </ng-container>

                <ng-template #noImagePlaceholder>
                    <div class="placeholder-media media-default">
                        <svg viewBox="0 0 24 24" width="40" height="40">
                            <path fill="#003b6f"
                            d="M21 19V5c0-1.1-.9-2-2-2H5
                            c-1.1 0-2 .9-2 2v14c0 1.1.9 2
                            2 2h14c1.1 0 2-.9 2-2z
                            M8.5 13.5l2.5 3.01L14.5
                            11l4.5 6H5l3.5-4.5z"/>
                        </svg>
                        <span>Banner No Disponible</span>
                    </div>
                </ng-template>
            </div>

            <div class="card-content content-principal">
                <h3 class="card-title">{{ evento.nombre }}</h3>

                <div class="meta-data-group">
                    <span class="card-tipo badge-institucional">{{ evento.tipo }}</span>

                    <p class="meta-item">
                        <span class="label-detalle">Fecha:</span>
                        {{ evento.fechaInicio }}
                    </p>

                    <p class="meta-item">
                        <span class="label-detalle">Lugar:</span>
                        {{ evento.lugar }}
                    </p>

                    <p class="meta-item">
                        <span class="label-detalle">Organiza:</span>
                        {{ evento.organizador }}
                    </p>
                </div>

                <h4 class="objetivo-resumen">Objetivo Principal:</h4>
                <p class="resumen-texto">{{ evento.objetivo }}</p>

                <div class="detalles-principales-ocultos">
                    <p><strong>Público:</strong> {{ evento.publicoObjetivo }}</p>
                    <p><strong>Ponentes:</strong> {{ evento.ponentes }}</p>
                    <p><strong>Requisitos:</strong> {{ evento.requisitos }}</p>
                </div>
            </div>

            <div class="card-actions-area">

                <a *ngIf="evento.enlaceExterno"
                   [href]="evento.enlaceExterno"
                   target="_blank"
                   class="btn-accion-secundario btn-social-link">
                   Ver Publicación
                </a>

                <button *ngIf="evento.rutaEvidencia"
                        (click)="visualizarDocumento(evento)"
                        class="btn-accion-principal btn-visualizar-doc">
                    Visualizar Documento
                </button>

                <!-- ❌ BOTÓN DE DESCARGA ELIMINADO (no existe downloadFile en TS) -->

                <p *ngIf="!evento.rutaEvidencia" class="sin-documento">
                    Sin Evidencia Adjunta
                </p>

                <details class="detalle-extendido">
                    <summary class="btn-accion-secundario btn-programa">
                        Ver Programa Completo
                    </summary>
                    <div class="details-content-expandido">
                        <p><strong>Programa:</strong> {{ evento.programa }}</p>
                        <p><strong>Materiales:</strong> {{ evento.materiales }}</p>
                    </div>
                </details>

            </div>
        </div>
    </div>
</div>
